<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat</title>
    <link rel="shortcut icon" href="favicon.svg" type="image/x-icon">
    <link rel="stylesheet" href="/styles.css">
    <script src="/socket.io/socket.io.js"></script>
</head>

<body class="h-screen flex flex-col bg-gray-900 text-white">
    <!-- Overlay de loading -->
    <div id="client-loading" class="fixed inset-0 flex items-center justify-center bg-black/50 z-50">
        <div class="flex flex-col items-center gap-4">
            <div class="h-12 w-12 rounded-full border-4 border-indigo-500 border-t-transparent animate-spin"></div>
            <p class="text-white text-sm font-medium">Connecting...</p>
        </div>
    </div>

    <!-- Top Bar -->
    <header class="flex items-center justify-between p-4 bg-gray-800 border-b border-gray-700">
        <!-- Menu icon (mobile only) -->
        <img src="/icons/menu.svg" alt="Menu" id="menu-icon"
            class="w-7 h-7 cursor-pointer lg:hidden hover:scale-110 transition" />
        <h1 class="text-xl font-bold">
            <a href="/">Private Meet</a>
        </h1>
        <!-- Copy Room ID Button -->
        <button id="copy-room-id"
            class="px-3 py-1 bg-indigo-600 cursor-pointer hover:bg-indigo-700 rounded-lg text-sm flex items-center gap-2">
            Copy Room ID
        </button>
        <input type="hidden" name="roomId" id="roomId" value="{{ roomId }}">
    </header>

    <!-- Main Content -->
    <main class="flex-1 flex flex-col lg:grid lg:grid-cols-12 overflow-hidden lg:min-h-0">
        <!-- Sidebar Participantes -->
        <aside id="participants"
            class="fixed top-0 left-0 h-full w-64 bg-gray-800 border-r border-gray-700 transform -translate-x-full transition-transform duration-300 z-50 lg:relative lg:translate-x-0 lg:col-span-2 p-4 overflow-y-auto">
            <h2 class="text-lg font-semibold mb-4">Participants <span id="participant-count">0</span></h2>
            <ul id="participant-list" class="space-y-2 text-gray-300"></ul>
        </aside>

        <!-- Container VÃ­deo -->
        <section id="video-container"
            class="flex flex-col items-center justify-center bg-black relative flex-1 lg:col-span-7 p-4 overflow-hidden h-full lg:min-h-0">
            <div id="remote-videos" class="grid gap-4 w-full h-full place-items-center">
                <video id="local-video" class="rounded-lg shadow-lg w-full h-full object-cover aspect-video"></video>
                <video id="remote-video-1" class="rounded-lg shadow-lg w-full h-full object-cover aspect-video"></video>
                <video id="remote-video-2" class="rounded-lg shadow-lg w-full h-full object-cover aspect-video"></video>
                <video id="remote-video-3" class="rounded-lg shadow-lg w-full h-full object-cover aspect-video"></video>
                <video id="remote-video-4" class="rounded-lg shadow-lg w-full h-full object-cover aspect-video"></video>
                <video id="remote-video-5" class="rounded-lg shadow-lg w-full h-full object-cover aspect-video"></video>
            </div>
            <!-- Controls -->
            <div id="controls" class="flex gap-4 mt-6 bg-gray-800/80 backdrop-blur-md px-6 py-3 rounded-xl shadow-lg">
                <button id="mute-button" class="hover:scale-110 transition cursor-pointer">
                    <img src="/icons/microphone-off-outline.svg" alt="Mute" class="w-6 h-6 sm:w-12 sm:h-12">
                </button>
                <button id="video-button" class="hover:scale-110 transition cursor-pointer">
                    <img src="/icons/video-off-outline.svg" alt="Stop Video" class="w-6 h-6 sm:w-12 sm:h-12">
                </button>
                <button id="share-screen-button" class="hover:scale-110 transition cursor-pointer">
                    <img src="/icons/share-screen-off-outline.svg" alt="Share Screen" class="w-6 h-6 sm:w-12 sm:h-12">
                </button>
                <button id="leave-button" class="hover:scale-110 transition cursor-pointer">
                    <img src="/icons/exit-outline.svg" alt="Leave Room" class="w-6 h-6 sm:w-12 sm:h-12">
                </button>
            </div>
        </section>

        <!-- Chat -->
        <section id="chat-container"
            class="flex flex-col bg-gray-800 border-t border-gray-700 h-[45vh] max-h-[45vh] lg:h-full lg:max-h-full lg:min-h-0 lg:border-t-0 lg:border-l lg:col-span-3">
            <div id="messages" class="flex-1 min-h-0 overflow-y-auto p-4 space-y-3">
                <div class="text-center text-gray-400 mt-10">No messages yet. Start the conversation!</div>
            </div>
            <div id="typing-indicator" class="hidden text-gray-400 mt-2 ml-2"></div>
            <div class="flex items-center gap-3 p-3 border-t border-gray-700">
                <button class="p-2 hover:bg-gray-700 rounded-lg cursor-pointer">
                    <img src="/icons/emoji.svg" alt="Emoji" class="w-6 h-6">
                </button>
                <input type="text" id="message-input" placeholder="Type your message here..." maxlength="500"
                    class="flex-1 px-4 py-2 rounded-lg bg-gray-900 border border-gray-700 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none">
                <button id="send-button" class="p-2 hover:bg-gray-700 rounded-lg cursor-pointer">
                    <img src="/icons/send.svg" alt="Send" class="w-6 h-6">
                </button>
            </div>
        </section>
    </main>
    <script src="/chat-bundle.js"></script>
</body>

</html>
